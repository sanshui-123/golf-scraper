# Claude APIè°ƒç”¨å¤±è´¥å¤„ç†æŒ‡å—

## ä¸€ã€å¢å¼ºåŠŸèƒ½è¯´æ˜

### 1. è‡ªåŠ¨é‡è¯•æœºåˆ¶
- **é‡è¯•æ¬¡æ•°**ï¼š3æ¬¡
- **é‡è¯•é—´éš”**ï¼š10ç§’
- **å•æ¬¡è¶…æ—¶**ï¼š180ç§’ï¼ˆ3åˆ†é’Ÿï¼‰

### 2. å¤±è´¥è®°å½•åŠŸèƒ½
æ‰€æœ‰APIè°ƒç”¨å¤±è´¥çš„æ–‡ç« ä¼šè‡ªåŠ¨è®°å½•åˆ° `failed_articles.json`

### 3. æ‰¹é‡é‡è¯•åŠŸèƒ½
å¯ä»¥ä¸€æ¬¡æ€§é‡è¯•æ‰€æœ‰å¤±è´¥çš„æ–‡ç« 

## äºŒã€å¤„ç†æµç¨‹

### å½“APIè°ƒç”¨å¤±è´¥æ—¶

1. **ç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•3æ¬¡**
   ```
   ğŸ”„ ç¬¬1æ¬¡å°è¯•Claudeæ”¹å†™...
   âŒ ç¬¬1æ¬¡å°è¯•å¤±è´¥: APIè°ƒç”¨å¤±è´¥
   â³ 10ç§’åé‡è¯•...
   ğŸ”„ ç¬¬2æ¬¡å°è¯•Claudeæ”¹å†™...
   ```

2. **å¦‚æœ3æ¬¡éƒ½å¤±è´¥**
   - æ–‡ç« ä¼šè¢«è·³è¿‡ï¼Œç»§ç»­å¤„ç†å…¶ä»–æ–‡ç« 
   - å¤±è´¥ä¿¡æ¯ä¼šè®°å½•åˆ° `failed_articles.json`
   - ç¨‹åºä¸ä¼šä¸­æ–­ï¼Œä¼šå®Œæˆå…¶ä»–æ–‡ç« çš„å¤„ç†

### æŸ¥çœ‹å¤±è´¥æŠ¥å‘Š

```bash
node api_failure_handler.js report
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š APIå¤±è´¥å¤„ç†æŠ¥å‘Š
==================

âŒ å¾…é‡è¯•æ–‡ç«  (2):
   1. https://www.golfmonthly.com/article1
      åŸå› : APIè°ƒç”¨å¤±è´¥: rate limit exceeded
      å°è¯•æ¬¡æ•°: 3
      æœ€åå°è¯•: 2025-01-10 14:45:32
```

### æ‰¹é‡é‡è¯•å¤±è´¥çš„æ–‡ç« 

```bash
# ç”Ÿæˆé‡è¯•URLåˆ—è¡¨
node api_failure_handler.js retry

# ç³»ç»Ÿä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šretry_urls_1736498732000.json
# ç„¶åè¿è¡Œï¼š
node run_batch_processor.js retry_urls_1736498732000.json
```

### æ¸…é™¤å¤±è´¥è®°å½•

```bash
node api_failure_handler.js clear
```

## ä¸‰ã€å¸¸è§APIå¤±è´¥åŸå› 

1. **Rate Limitï¼ˆé¢‘ç‡é™åˆ¶ï¼‰**
   - è§£å†³ï¼šç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•
   - å»ºè®®ï¼šæ‰¹é‡å¤„ç†æ—¶æ§åˆ¶å¹¶å‘æ•°

2. **Network Errorï¼ˆç½‘ç»œé”™è¯¯ï¼‰**
   - è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•

3. **Timeoutï¼ˆè¶…æ—¶ï¼‰**
   - åŸå› ï¼šæ–‡ç« å¤ªé•¿æˆ–ç½‘ç»œæ…¢
   - è§£å†³ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•

4. **API Errorï¼ˆAPIé”™è¯¯ï¼‰**
   - å¯èƒ½æ˜¯ä¸´æ—¶æœåŠ¡é—®é¢˜
   - è§£å†³ï¼šç¨åé‡è¯•

## å››ã€æœ€ä½³å®è·µ

1. **å®šæœŸæ£€æŸ¥å¤±è´¥æŠ¥å‘Š**
   ```bash
   node api_failure_handler.js report
   ```

2. **æ‰¹é‡é‡è¯•å¤±è´¥æ–‡ç« **
   - å»ºè®®åœ¨ç½‘ç»œçŠ¶å†µå¥½çš„æ—¶å€™è¿›è¡Œ
   - å¯ä»¥åœ¨æ·±å¤œæˆ–æ¸…æ™¨é‡è¯•

3. **ç›‘æ§å¤„ç†è¿‡ç¨‹**
   - è§‚å¯Ÿé‡è¯•æ¬¡æ•°
   - å¦‚æœæŸç¯‡æ–‡ç« æ€»æ˜¯å¤±è´¥ï¼Œå¯èƒ½éœ€è¦å•ç‹¬å¤„ç†

## äº”ã€æ‰‹åŠ¨å¤„ç†å•ç¯‡å¤±è´¥æ–‡ç« 

å¦‚æœæŸç¯‡æ–‡ç« åå¤å¤±è´¥ï¼Œå¯ä»¥å•ç‹¬å¤„ç†ï¼š

```bash
# åˆ›å»ºå•ä¸ªURLçš„JSONæ–‡ä»¶
echo '["https://www.golfmonthly.com/problem-article"]' > single_retry.json

# è¿è¡Œå¤„ç†
node run_batch_processor.js single_retry.json
```

## å…­ã€æ–‡ä»¶è¯´æ˜

- **article_rewriter_enhanced.js** - å¢å¼ºç‰ˆæ”¹å†™å™¨ï¼ˆåŒ…å«é‡è¯•æœºåˆ¶ï¼‰
- **api_failure_handler.js** - APIå¤±è´¥å¤„ç†å·¥å…·
- **failed_articles.json** - å¤±è´¥æ–‡ç« è®°å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

---

æœ€åæ›´æ–°ï¼š2025-01-10