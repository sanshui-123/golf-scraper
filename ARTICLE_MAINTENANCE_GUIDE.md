# 文章维护工具使用指南

## 工具说明
`article_maintenance_tool.js` 是一个稳定的文章维护工具，用于清理和修复高尔夫文章系统中的问题。

## 主要功能

1. **清理备份文件** - 删除所有 backup 文件
2. **清理临时文件** - 删除 HTML、临时文件等
3. **修复索引文件** - 清理无效的文章引用
4. **验证文章完整性** - 检查文章和图片的对应关系

## 使用方法

### 维护特定日期
```bash
node article_maintenance_tool.js 2025-07-09
```

### 维护所有日期
```bash
node article_maintenance_tool.js --all
```

### 维护最近7天
```bash
node article_maintenance_tool.js --recent
```

## 自动清理规则

### 会被删除的文件：
- 包含 "backup" 的文件
- `.html` 文件
- `.DS_Store` 文件
- 以 `._` 开头的文件
- 以 `~` 结尾的文件
- `.tmp` 文件
- `.bak` 文件

### 会被保留的文件：
- `wechat_article_数字.md` 格式的标准文章
- `article_数字_img_数字.jpg` 格式的标准图片
- JSON 索引文件

## 常见问题解决

### 问题：文章列表显示不存在的文章（如98、99）
**原因**：备份文件被错误识别为文章
**解决**：运行 `node article_maintenance_tool.js 日期`

### 问题：删除文章后仍然显示
**原因**：索引文件未更新
**解决**：运行维护工具会自动修复索引

### 问题：图片孤立存在
**原因**：文章被删除但图片未清理
**解决**：维护工具会自动清理孤立图片

## 注意事项

1. **此工具已经过充分测试，请勿修改核心逻辑**
2. **运行前会显示将要执行的操作**
3. **所有删除操作都会在控制台显示**
4. **建议定期运行维护，保持系统清洁**

## 维护计划建议

- **每日**：对当天的文章运行维护
- **每周**：运行 `--recent` 维护最近7天
- **每月**：运行 `--all` 完整维护

## 版本信息
- 版本：v1.0 稳定版
- 创建日期：2025-07-09
- 状态：生产就绪，请勿修改